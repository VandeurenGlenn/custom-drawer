<link rel="import" href="../backed/backed.html">

<template id="custom-drawer">
  <style>
    :host {
      display: flex;
      flex-direction: column;
      width: var(--custom-drawer-width, 256px);
      height: 100%;
      background: var(--custom-drawer-background, #FFF);
      background-blend-mode: hue;
      color: var(--custom-drawer-color, #333);
      opacity: 0;
      box-shadow: 0 5px 5px 5px rgba(0, 0, 0, 0.14);
    }
    ::slotted([slot="header"]) {
      display: block;
      box-sizing: border-box;
      min-height: 48px;
      border-bottom: 1px solid rgba(0, 0, 0, 0.14);
      color: var(--custom-header-color, #FFF);
      background: var(--custom-header-background, #EEE);
    }
    ::slotted([slot="footer"]) {
      display: block;
      box-sizing: border-box;
      min-height: 48px;
      border-top: 1px solid rgba(0, 0, 0, 0.14);
    }
    ::slotted([slot="content"]) {
      display: flex;
      flex-direction: column;
      height: 100%;
      width: 100%;
    }
    :host(.opened) {
      opacity: 1;
    }
  </style>
  <slot name="header"></slot>
  <slot name="content"></slot>
  <slot name="footer"></slot>
</template>

<script>
  Backed(class CustomDrawer extends HTMLElement {
    static get observedAttributes() {
      return ['start-open']
    }

    static get properties() {
      return {
        opened: {
          value: false,
          observer: '__openedChanged'
        }
      }
    }

    attributeChangedCallback(name, oldValue, newValue) {
      if (name === 'start-open') {
        this.opened = true;
      }
    }

    __openedChanged({value}) {
      if (value) this.classList.add('opened');
      else this.classList.remove('opened');
    }
  });
</script>
